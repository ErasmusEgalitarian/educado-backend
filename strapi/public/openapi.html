<!doctype html>
<html lang="en">
  <head>
    <title>Educado API Documentation</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://unpkg.com/swagger-ui-dist@5.0.0/swagger-ui.css"
    />
  </head>
  <body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@5.0.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.0.0/swagger-ui-standalone-preset.js"></script>
    <script>
      window.onload = function () {
        const ui = SwaggerUIBundle({
          url: "/openapi/strapi-spec.json",
          dom_id: "#swagger-ui",
          presets: [SwaggerUIBundle.presets.apis, SwaggerUIStandalonePreset],
          layout: "StandaloneLayout",
          persistAuthorization: true,
          withCredentials: true,
          requestInterceptor: function (request) {
            console.log("üîç Swagger UI making request:", {
              url: request.url,
              method: request.method,
              headers: request.headers,
              hasAuthHeader: !!request.headers.Authorization,
            });
            if (!request.headers.Authorization) {
              console.warn(
                "‚ö†Ô∏è  WARNING: Authorization header is missing from this request!"
              );
            }
            return request;
          },
          responseInterceptor: function (response) {
            console.log(
              "üì° Response status:",
              response.status,
              "for",
              response.url
            );
            return response;
          },
        });

        // Make UI available globally for debugging
        globalThis.swaggerUI = ui;
      };
    </script>
  </body>
</html>
